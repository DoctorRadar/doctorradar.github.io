<!doctype html><html class=no-js lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>Building A Hugo Website - Graeme E. Smith</title>
<script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script>
<meta name=description content>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=dns-prefetch href=//fonts.googleapis.com>
<link rel=dns-prefetch href=//fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
<link rel=stylesheet href=/css/style.css>
<link rel="shortcut icon" href=/favicon.ico>
</head>
<body class=body>
<div class="container container--outer">
<header class=header>
<div class="container header__container">
<div class=logo>
<a class=logo__link href=/ title="Graeme E. Smith" rel=home>
<div class="logo__item logo__text">
<div class=logo__title>Graeme E. Smith</div>
</div>
</a>
</div>
<div class=divider></div>
</div>
</header>
<div class="wrapper flex">
<div class=primary>
<main class=main role=main>
<article class=post>
<header class=post__header>
<h1 class=post__title>Building A Hugo Website</h1>
</header>
<div class="content post__content clearfix">
<h2 id=why-am-i-using-hugo>Why am I using <code>hugo</code></h2>
<p>This website is a static site built using <code>hugo</code>. I made the decision to go with
this approach after spending about 10 mins using the free
<a href=https://wordpress.com>wordpress.com</a> blogging platform. I found the editor a
nightmare and it felt like my entire experience would be about trying to make it
look good rather than focusing on content. I wanted something that looked and
felt more like <a href=https://jonathanh.co.uk>Jonathon Hodgson&rsquo;s</a> site: minimalist in
style and content focused. Critically, I wanted to be able to write my content
in markdown because a) I use it a lot in other activities so it comes easily to
me and b) I didn&rsquo;t want to faff around writing <code>html</code> directly.</p>
<p>Following some of the links on Jonathon&rsquo;s page showed me that he had developed
bash script for generating a site from markdown. A bit of googling later, I
found that there were lots of ways to do this, and that if I chose wisely I
could have a free site hosted on <a href=https://github.io>github.io</a> that would be
managed by <code>git</code> and would compile automatically on pushing to
<a href=https:/github.com>github</a>. It all sounded perfect.</p>
<p>I considered two possible tools: <a href=https://jekyllrb.com>jekyll</a> and
<a href=https://gohugo.io>hugo</a> both of which met my criteria. After what was probably
not enough evaluation I went with <code>hugo</code>. <em>Full disclosure, this was before I
realized that <code>jekyll</code> is the website builder that <code>github.io</code> recommend.</em></p>
<h2 id=installing-hugo>Installing hugo</h2>
<p>Installing <code>hugo</code> is very easy on <code>macos</code> since you can use the
<a href=https://brew.sh/>homebrew</a> package manager. (This was was really clinched it
for me in the <code>hugo</code> vs <code>jekyll</code> consideration.)</p>
<p>All you need to do is</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install hugo
</code></pre></div><p><code>homebrew</code> will do its thing and <code>hugo</code> will be installed.</p>
<h2 id=configuring-the-githubio-site>Configuring the github.io site</h2>
<p>To establish a website at <code>github.io</code> I made a &ldquo;special&rdquo; repository on
<code>github.com</code> that has the name <code>&lt;username>.github.io</code>. Once that is created
adding a file to the route of the repo called <code>index.html</code> will, after a few
minutes syncing, result in a website displaying the content of <code>index.html</code> at
<code>https://&lt;username>.github.io</code>. This process for doing this as a &lsquo;user or
organization site&rsquo; is described at the bottom of the <a href=https://github.io>github.io landing
page</a>.</p>
<p>Of course, for a <code>hugo</code> site, there is no need to create an <code>index.html</code> file as
<code>hugo</code> will do it for you.</p>
<h2 id=establishing-a-hugo-site-on-github>Establishing a hugo site on github</h2>
<ul>
<li>Go to <code>github.com</code> and establish the repository <code>&lt;username>.github.io</code> where
<code>&lt;username></code> is the username associated with the <code>github.com</code> account.</li>
<li>Clone the repository onto the local machine</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone &lt;username&gt;.github.io
</code></pre></div><ul>
<li>Establish an action to build the website on push
<ul>
<li>In the repository, create the directory <code>.github/workflows</code></li>
<li>In the <code>workflows</code> directory create the file <code>gh-pages.yml</code></li>
<li>Add the following content to the file:</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch to deploy</span>
  <span style=color:#f92672>pull_request</span>:

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
          <span style=color:#75715e># extended: true</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./docs</span>
</code></pre></div><ul>
<li>I used the workflow script from <a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>gohugo.io host on github
pages</a> but
modified the line <code>runs-on: ubuntu-20.04</code> to <code>runs-on: ubuntu-latest</code>.</li>
<li>Push the file to repository.</li>
</ul>
</li>
<li>Configure <code>github.com</code> to publish the site to <code>github.io</code>
<ul>
<li>In the <code>&lt;username>github.io</code> repository web view at <code>github.com</code> go to
<code>settings->Pages</code></li>
<li>Set the <em>Source</em> to be the <code>gh-pages</code> branch and the directory to be <code>/ (root)</code></li>
<li>If the <code>gh-pages</code> branch is not available, it is because the action script
has not run yet to create it. Come back and do this step after something has
been pushed to the repository that triggers the action.</li>
</ul>
</li>
<li>Back in the command line, in the directory above the repository
<code>&lt;username>.github.io</code>, initialize the repository as a new <code>hugo</code> website</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hugo new site ./&lt;usernamei&gt;.github.io -f
</code></pre></div><ul>
<li>This creates this sets up the <code>hugo</code> site in the repo. The <code>-f</code> argument is
needed to force <code>hugo</code> to make the site in a directory that already contains
files. (Remember, even an empty repository contains the <code>.git</code> directory.)</li>
<li>Change directory into the repository directory</li>
<li>Use <code>git status</code> and <code>git add</code> to add all files. Not all of the directories
created by the initialization process have files in them, and <code>git</code> doesn&rsquo;t
commit empty directories. This has not been a problem for me.</li>
<li>Use <code>git commit</code> and <code>git push</code> to push the files.
<ul>
<li>I found it easier to push the files at this stage than after I added the
submodules because I could use <code>git add -A</code> to add all files. After the
submodule for the theme is installed, this causes issues as it tries to add
the submodule files which causes an error.</li>
</ul>
</li>
<li>Install the theme into the <code>themes/</code> directory.
<ul>
<li>Move into the <code>themes/</code> directory</li>
<li>Install the theme as a <code>git submodule</code></li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git submodule add &lt;theme-git-repository&gt;
</code></pre></div><ul>
<li>Move back to the top level of the repository</li>
<li>Open the file <code>config.toml</code> in text editor</li>
<li>Add the line</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#39;&lt;themename&gt;&#39;</span>
</code></pre></div><ul>
<li>For this website, I used the <a href=https://themes.gohugo.io/themes/mainroad/>mainroad
theme</a>. There are good theme
installation instruction on theme webpage.</li>
</ul>
</li>
<li>Return to the top level directory of the <code>&lt;username>.github.io</code> repository in
the command line</li>
<li>Add content to the website, e.g. posts and pages, following the instructions
on the <a href=https://gohugo.io/getting-started/quick-start/>gohugo.io quickstart</a>
guide.</li>
<li>When ready, set the pages to have</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>draft</span>: <span style=color:#66d9ef>false</span>
</code></pre></div><ul>
<li>Add, commit, and push the content to <code>github</code>.
<ul>
<li>This should trigger the <code>gh-pages</code> action to compile the website on to the
<code>gh-pages</code> branch</li>
<li>After a few minutes, the website at <code>https://&lt;username>.github.io</code> should update</li>
</ul>
</li>
</ul>
<h2 id=continuing-to-working-with-the-site>Continuing to working with the site</h2>
<p>Because the site is synced via <code>git</code> and <code>github</code> it is straightforward to
develop it from multiple computers. However, because it is common to include the
website theme via a submodule, care must be taken when cloning the repository.</p>
<p>The <a href=https://git-scm.com/book/en/v2/Git-Tools-Submodules>git book</a> explains the
procedure for cloning a repository and its submoudles as:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone &lt;repo-address&gt;
git submodule init
git submodule update
</code></pre></div><p>A one line alternative, that is the easiest way to clone a repo with submodules
is:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone --recurse-submodules &lt;repo-address&gt;
</code></pre></div><p>The above should successfully clone the website and themes installed using the
submodule approach.</p>
</div>
<footer class=post__footer>
<div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg>
<ul class=tags__list>
<li class=tags__item>
<a class="tags__link btn" href=/tags/hugo/ rel=tag>hugo</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/git/ rel=tag>git</a>
</li>
<li class=tags__item>
<a class="tags__link btn" href=/tags/website/ rel=tag>website</a>
</li>
</ul>
</div>
</footer>
</article>
</main>
</div>
</div>
<footer class=footer>
<div class="container footer__container flex">
<div class=footer__copyright>
&copy; 2021 Graeme E. Smith.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span>
</div>
</div>
</footer>
</div>
<script async defer src=/js/menu.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>